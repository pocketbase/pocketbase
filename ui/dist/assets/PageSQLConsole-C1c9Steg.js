const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CodeEditor-BOs4ZIdI.js","./index-B4ZsHsKR.js","./index-wnKjfGML.css","./index-C7XayrVU.js"])))=>i.map(i=>d[i]);
import{S as _e,i as de,s as me,P as ot,d as J,t as W,a as H,m as j,c as V,L as ge,h as k,j as ce,k as I,C as ee,D as te,l as w,n as c,o as G,E as re,M as oe,u as p,v as E,w as f,H as U,N as ae,O as F,Q as le,R as ye,I as R,A as N,T as ve,U as ke,V as we,W as _t,X as dt,Y as mt,y as at,Z as ct,_ as ft,$ as pt,a0 as bt,a1 as ht,a2 as gt,a3 as yt,p as be,K as vt,f as kt,a4 as qe,a5 as wt,a6 as Ee,a7 as qt}from"./index-B4ZsHsKR.js";function Te(s,e,l){const t=s.slice();return t[9]=e[l],t}function Se(s,e,l){const t=s.slice();return t[12]=e[l],t}function Le(s,e,l){const t=s.slice();return t[9]=e[l],t}function $e(s,e,l){const t=s.slice();return t[12]=e[l],t}function Et(s){let e,l,t,n=s[3].length>0&&Me(s),i=s[2].length>0&&Ce(s);return{c(){n&&n.c(),e=E(),i&&i.c(),l=ae()},m(o,r){n&&n.m(o,r),w(o,e,r),i&&i.m(o,r),w(o,l,r),t=!0},p(o,r){o[3].length>0?n?(n.p(o,r),r&8&&H(n,1)):(n=Me(o),n.c(),H(n,1),n.m(e.parentNode,e)):n&&(ee(),W(n,1,1,()=>{n=null}),te()),o[2].length>0?i?(i.p(o,r),r&4&&H(i,1)):(i=Ce(o),i.c(),H(i,1),i.m(l.parentNode,l)):i&&(ee(),W(i,1,1,()=>{i=null}),te())},i(o){t||(H(n),H(i),t=!0)},o(o){W(n),W(i),t=!1},d(o){o&&(k(e),k(l)),n&&n.d(o),i&&i.d(o)}}}function Tt(s){let e;return{c(){e=p("div"),e.textContent="No tables found",f(e,"class","txt-center p-base txt-hint")},m(l,t){w(l,e,t)},p:U,i:U,o:U,d(l){l&&k(e)}}}function St(s){let e;return{c(){e=p("div"),e.innerHTML='<span class="loader loader-sm"></span>',f(e,"class","txt-center p-base txt-hint")},m(l,t){w(l,e,t)},p:U,i:U,o:U,d(l){l&&k(e)}}}function Me(s){let e,l,t=F(s[3]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Qe(Le(s,t,o));const i=o=>W(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ae()},m(o,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,r);w(o,e,r),l=!0},p(o,r){if(r&40){t=F(o[3]);let a;for(a=0;a<t.length;a+=1){const u=Le(o,t,a);n[a]?(n[a].p(u,r),H(n[a],1)):(n[a]=Qe(u),n[a].c(),H(n[a],1),n[a].m(e.parentNode,e))}for(ee(),a=t.length;a<n.length;a+=1)i(a);te()}},i(o){if(!l){for(let r=0;r<t.length;r+=1)H(n[r]);l=!0}},o(o){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)W(n[r]);l=!1},d(o){o&&k(e),le(n,o)}}}function He(s){let e,l,t,n,i=s[12].name+"",o,r,a,u=s[12].type+"",m,d,_;return{c(){e=p("div"),l=p("i"),t=E(),n=p("span"),o=N(i),r=E(),a=p("span"),m=N(u),d=E(),f(l,"class","ri-key-line txt-sm"),I(l,"txt-primary",s[12].primaryKey),I(l,"txt-disabled",!s[12].primaryKey),f(n,"class","column-name svelte-s5yt5u"),f(a,"class","column-type txt-hint txt-sm svelte-s5yt5u"),f(e,"class","column-item svelte-s5yt5u"),f(e,"title",_=s[12].type)},m(y,b){w(y,e,b),c(e,l),c(e,t),c(e,n),c(n,o),c(e,r),c(e,a),c(a,m),c(e,d)},p(y,b){b&8&&I(l,"txt-primary",y[12].primaryKey),b&8&&I(l,"txt-disabled",!y[12].primaryKey),b&8&&i!==(i=y[12].name+"")&&R(o,i),b&8&&u!==(u=y[12].type+"")&&R(m,u),b&8&&_!==(_=y[12].type)&&f(e,"title",_)},d(y){y&&k(e)}}}function Lt(s){let e,l,t=F(s[9].columns),n=[];for(let i=0;i<t.length;i+=1)n[i]=He($e(s,t,i));return{c(){e=p("div");for(let i=0;i<n.length;i+=1)n[i].c();l=E(),f(e,"class","columns-list svelte-s5yt5u")},m(i,o){w(i,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);w(i,l,o)},p(i,o){if(o&8){t=F(i[9].columns);let r;for(r=0;r<t.length;r+=1){const a=$e(i,t,r);n[r]?n[r].p(a,o):(n[r]=He(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&(k(e),k(l)),le(n,i)}}}function $t(s){let e,l,t,n,i,o=s[9].name+"",r,a,u,m,d,_,y,b;function h(){return s[6](s[9])}return{c(){e=p("div"),l=p("i"),n=E(),i=p("span"),r=N(o),a=E(),u=p("div"),m=E(),d=p("button"),d.innerHTML='<i class="ri-play-line"></i>',_=E(),f(l,"class",t=s[9].type==="view"?"ri-eye-line":"ri-table-line"),f(i,"class","txt"),f(u,"class","flex-fill"),f(d,"type","button"),f(d,"class","btn btn-xs btn-circle btn-secondary btn-outline"),f(d,"aria-label","Quick query"),f(e,"class","flex flex-gap-5")},m(q,T){w(q,e,T),c(e,l),c(e,n),c(e,i),c(i,r),c(e,a),c(e,u),c(e,m),c(e,d),w(q,_,T),y||(b=[G(d,"click",ve(h)),re(oe.call(null,d,{text:"SELECT * LIMIT 100",position:"left"}))],y=!0)},p(q,T){s=q,T&8&&t!==(t=s[9].type==="view"?"ri-eye-line":"ri-table-line")&&f(l,"class",t),T&8&&o!==(o=s[9].name+"")&&R(r,o)},d(q){q&&(k(e),k(_)),y=!1,ce(b)}}}function Qe(s){let e,l;return e=new ye({props:{single:!0,class:"table-accordion",$$slots:{header:[$t],default:[Lt]},$$scope:{ctx:s}}}),{c(){V(e.$$.fragment)},m(t,n){j(e,t,n),l=!0},p(t,n){const i={};n&524296&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ce(s){let e,l;return e=new ye({props:{single:!0,class:"system-tables-accordion",$$slots:{header:[Ct],default:[Qt]},$$scope:{ctx:s}}}),{c(){V(e.$$.fragment)},m(t,n){j(e,t,n),l=!0},p(t,n){const i={};n&524292&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ne(s){let e,l,t,n,i=s[12].name+"",o,r,a,u=s[12].type+"",m,d,_;return{c(){e=p("div"),l=p("i"),t=E(),n=p("span"),o=N(i),r=E(),a=p("span"),m=N(u),d=E(),f(l,"class","ri-key-line txt-sm"),I(l,"txt-primary",s[12].primaryKey),I(l,"txt-disabled",!s[12].primaryKey),f(n,"class","column-name svelte-s5yt5u"),f(a,"class","column-type txt-hint txt-sm svelte-s5yt5u"),f(e,"class","column-item svelte-s5yt5u"),f(e,"title",_=s[12].type)},m(y,b){w(y,e,b),c(e,l),c(e,t),c(e,n),c(n,o),c(e,r),c(e,a),c(a,m),c(e,d)},p(y,b){b&4&&I(l,"txt-primary",y[12].primaryKey),b&4&&I(l,"txt-disabled",!y[12].primaryKey),b&4&&i!==(i=y[12].name+"")&&R(o,i),b&4&&u!==(u=y[12].type+"")&&R(m,u),b&4&&_!==(_=y[12].type)&&f(e,"title",_)},d(y){y&&k(e)}}}function Mt(s){let e,l,t=F(s[9].columns),n=[];for(let i=0;i<t.length;i+=1)n[i]=Ne(Se(s,t,i));return{c(){e=p("div");for(let i=0;i<n.length;i+=1)n[i].c();l=E(),f(e,"class","columns-list svelte-s5yt5u")},m(i,o){w(i,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);w(i,l,o)},p(i,o){if(o&4){t=F(i[9].columns);let r;for(r=0;r<t.length;r+=1){const a=Se(i,t,r);n[r]?n[r].p(a,o):(n[r]=Ne(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&(k(e),k(l)),le(n,i)}}}function Ht(s){let e,l,t,n,i,o=s[9].name+"",r,a,u,m,d,_,y,b;function h(){return s[7](s[9])}return{c(){e=p("div"),l=p("i"),n=E(),i=p("span"),r=N(o),a=E(),u=p("div"),m=E(),d=p("button"),d.innerHTML='<i class="ri-play-line"></i>',_=E(),f(l,"class",t=s[9].type==="view"?"ri-eye-line":"ri-table-line"),f(i,"class","txt"),f(u,"class","flex-fill"),f(d,"type","button"),f(d,"class","btn btn-xs btn-circle btn-secondary btn-outline"),f(d,"aria-label","Quick query"),f(e,"class","flex flex-gap-5")},m(q,T){w(q,e,T),c(e,l),c(e,n),c(e,i),c(i,r),c(e,a),c(e,u),c(e,m),c(e,d),w(q,_,T),y||(b=[G(d,"click",ve(h)),re(oe.call(null,d,{text:"SELECT * LIMIT 100",position:"left"}))],y=!0)},p(q,T){s=q,T&4&&t!==(t=s[9].type==="view"?"ri-eye-line":"ri-table-line")&&f(l,"class",t),T&4&&o!==(o=s[9].name+"")&&R(r,o)},d(q){q&&(k(e),k(_)),y=!1,ce(b)}}}function We(s){let e,l;return e=new ye({props:{single:!0,class:"table-accordion nested-accordion",$$slots:{header:[Ht],default:[Mt]},$$scope:{ctx:s}}}),{c(){V(e.$$.fragment)},m(t,n){j(e,t,n),l=!0},p(t,n){const i={};n&524292&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Qt(s){let e,l,t=F(s[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=We(Te(s,t,o));const i=o=>W(n[o],1,1,()=>{n[o]=null});return{c(){e=p("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","system-tables-content svelte-s5yt5u")},m(o,r){w(o,e,r);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(o,r){if(r&36){t=F(o[2]);let a;for(a=0;a<t.length;a+=1){const u=Te(o,t,a);n[a]?(n[a].p(u,r),H(n[a],1)):(n[a]=We(u),n[a].c(),H(n[a],1),n[a].m(e,null))}for(ee(),a=t.length;a<n.length;a+=1)i(a);te()}},i(o){if(!l){for(let r=0;r<t.length;r+=1)H(n[r]);l=!0}},o(o){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)W(n[r]);l=!1},d(o){o&&k(e),le(n,o)}}}function Ct(s){let e,l,t,n,i,o=s[2].length+"",r,a;return{c(){e=p("div"),l=p("i"),t=E(),n=p("span"),i=N("System Tables ("),r=N(o),a=N(")"),f(l,"class","ri-shield-line"),f(n,"class","txt"),f(e,"class","system-tables-header svelte-s5yt5u")},m(u,m){w(u,e,m),c(e,l),c(e,t),c(e,n),c(n,i),c(n,r),c(n,a)},p(u,m){m&4&&o!==(o=u[2].length+"")&&R(r,o)},d(u){u&&k(e)}}}function Nt(s){let e,l,t,n,i,o,r,a,u,m,d,_,y,b,h;const q=[St,Tt,Et],T=[];function M(v,Q){return v[1]?0:v[0].length===0?1:2}return d=M(s),_=T[d]=q[d](s),{c(){e=p("header"),l=p("div"),t=p("span"),t.textContent="Database Schema",n=E(),i=p("button"),o=p("i"),r=E(),a=p("hr"),u=E(),m=p("div"),_.c(),f(t,"class","txt"),f(o,"class","ri-refresh-line svelte-s5yt5u"),I(o,"rotating",s[1]),f(i,"type","button"),f(i,"class","btn btn-xs btn-circle btn-transparent"),i.disabled=s[1],f(i,"aria-label","Refresh schema"),f(l,"class","sidebar-title flex flex-gap-10"),f(e,"class","sidebar-header"),f(a,"class","m-t-5 m-b-xs"),f(m,"class","sidebar-content")},m(v,Q){w(v,e,Q),c(e,l),c(l,t),c(l,n),c(l,i),c(i,o),w(v,r,Q),w(v,a,Q),w(v,u,Q),w(v,m,Q),T[d].m(m,null),y=!0,b||(h=[G(i,"click",s[4]),re(oe.call(null,i,{text:"Refresh schema",position:"right"}))],b=!0)},p(v,Q){(!y||Q&2)&&I(o,"rotating",v[1]),(!y||Q&2)&&(i.disabled=v[1]);let A=d;d=M(v),d===A?T[d].p(v,Q):(ee(),W(T[A],1,1,()=>{T[A]=null}),te(),_=T[d],_?_.p(v,Q):(_=T[d]=q[d](v),_.c()),H(_,1),_.m(m,null))},i(v){y||(H(_),y=!0)},o(v){W(_),y=!1},d(v){v&&(k(e),k(r),k(a),k(u),k(m)),T[d].d(),b=!1,ce(h)}}}function Wt(s){let e,l;return e=new ot({props:{$$slots:{default:[Nt]},$$scope:{ctx:s}}}),{c(){V(e.$$.fragment)},m(t,n){j(e,t,n),l=!0},p(t,[n]){const i={};n&524303&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function At(s,e,l){let t,n;const i=ge();let{tables:o=[]}=e,{isLoading:r=!1}=e;function a(){i("refresh")}function u(_){i("quickQuery",{tableName:_})}const m=_=>u(_.name),d=_=>u(_.name);return s.$$set=_=>{"tables"in _&&l(0,o=_.tables),"isLoading"in _&&l(1,r=_.isLoading)},s.$$.update=()=>{s.$$.dirty&1&&l(3,t=o.filter(_=>!_.name.startsWith("_")&&!_.name.toLowerCase().includes("sqlite"))),s.$$.dirty&1&&l(2,n=o.filter(_=>_.name.startsWith("_")&&!_.name.toLowerCase().includes("sqlite")))},[o,r,n,t,a,u,m,d]}class It extends _e{constructor(e){super(),de(this,e,At,Wt,me,{tables:0,isLoading:1})}}function Ae(s,e,l){const t=s.slice();return t[6]=e[l],t}function Ie(s){let e,l,t,n;return l=new ot({props:{$$slots:{default:[Kt]},$$scope:{ctx:s}}}),{c(){e=p("div"),V(l.$$.fragment),f(e,"class","history-wrapper svelte-1qqq4lr")},m(i,o){w(i,e,o),j(l,e,null),n=!0},p(i,o){const r={};o&513&&(r.$$scope={dirty:o,ctx:i}),l.$set(r)},i(i){n||(H(l.$$.fragment,i),i&&_t(()=>{n&&(t||(t=ke(e,we,{duration:200,axis:"x"},!0)),t.run(1))}),n=!0)},o(i){W(l.$$.fragment,i),i&&(t||(t=ke(e,we,{duration:200,axis:"x"},!1)),t.run(0)),n=!1},d(i){i&&k(e),J(l),i&&t&&t.end()}}}function Oe(s){let e,l,t;return{c(){e=p("button"),e.innerHTML='<i class="ri-delete-bin-line"></i>',f(e,"type","button"),f(e,"class","btn btn-xs btn-circle btn-transparent txt-danger"),f(e,"aria-label","Clear history")},m(n,i){w(n,e,i),l||(t=[G(e,"click",s[3]),re(oe.call(null,e,{text:"Clear history",position:"left"}))],l=!0)},p:U,d(n){n&&k(e),l=!1,ce(t)}}}function Ot(s){let e,l=F(s[0]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Re(Ae(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=ae()},m(n,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,i);w(n,e,i)},p(n,i){if(i&5){l=F(n[0]);let o;for(o=0;o<l.length;o+=1){const r=Ae(n,l,o);t[o]?t[o].p(r,i):(t[o]=Re(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&k(e),le(t,n)}}}function Rt(s){let e;return{c(){e=p("div"),e.textContent="No query history yet",f(e,"class","txt-center p-base txt-hint")},m(l,t){w(l,e,t)},p:U,d(l){l&&k(e)}}}function Re(s){let e,l,t=s[6]+"",n,i,o,r,a;function u(){return s[4](s[6])}return{c(){e=p("button"),l=p("div"),n=N(t),i=E(),f(l,"class","history-query svelte-1qqq4lr"),f(e,"type","button"),f(e,"class","sidebar-list-item history-item svelte-1qqq4lr"),f(e,"title",o=s[6])},m(m,d){w(m,e,d),c(e,l),c(l,n),c(e,i),r||(a=G(e,"click",u),r=!0)},p(m,d){s=m,d&1&&t!==(t=s[6]+"")&&R(n,t),d&1&&o!==(o=s[6])&&f(e,"title",o)},d(m){m&&k(e),r=!1,a()}}}function Kt(s){let e,l,t,n,i,o,r,a,u,m,d=s[0].length>0&&Oe(s);function _(h,q){return h[0].length===0?Rt:Ot}let y=_(s),b=y(s);return{c(){e=p("header"),l=p("div"),t=p("span"),t.textContent="Query History",n=E(),i=p("div"),o=E(),d&&d.c(),r=E(),a=p("hr"),u=E(),m=p("div"),b.c(),f(t,"class","txt"),f(i,"class","flex-fill"),f(l,"class","sidebar-title flex"),f(e,"class","sidebar-header"),f(a,"class","m-t-5 m-b-xs"),f(m,"class","sidebar-content")},m(h,q){w(h,e,q),c(e,l),c(l,t),c(l,n),c(l,i),c(l,o),d&&d.m(l,null),w(h,r,q),w(h,a,q),w(h,u,q),w(h,m,q),b.m(m,null)},p(h,q){h[0].length>0?d?d.p(h,q):(d=Oe(h),d.c(),d.m(l,null)):d&&(d.d(1),d=null),y===(y=_(h))&&b?b.p(h,q):(b.d(1),b=y(h),b&&(b.c(),b.m(m,null)))},d(h){h&&(k(e),k(r),k(a),k(u),k(m)),d&&d.d(),b.d()}}}function Dt(s){let e,l,t=s[1]&&Ie(s);return{c(){t&&t.c(),e=ae()},m(n,i){t&&t.m(n,i),w(n,e,i),l=!0},p(n,[i]){n[1]?t?(t.p(n,i),i&2&&H(t,1)):(t=Ie(n),t.c(),H(t,1),t.m(e.parentNode,e)):t&&(ee(),W(t,1,1,()=>{t=null}),te())},i(n){l||(H(t),l=!0)},o(n){W(t),l=!1},d(n){n&&k(e),t&&t.d(n)}}}function Ft(s,e,l){const t=ge();let{history:n=[]}=e,{visible:i=!0}=e;function o(u){t("select",{query:u})}function r(){t("clear")}const a=u=>o(u);return s.$$set=u=>{"history"in u&&l(0,n=u.history),"visible"in u&&l(1,i=u.visible)},[n,i,o,r,a]}class Pt extends _e{constructor(e){super(),de(this,e,Ft,Dt,me,{history:0,visible:1})}}function Ke(s,e,l){const t=s.slice();return t[5]=e[l],t}function De(s,e,l){const t=s.slice();return t[8]=e[l],t}function Fe(s,e,l){const t=s.slice();return t[8]=e[l],t}function Pe(s){let e,l,t,n,i,o,r,a;return{c(){e=p("div"),l=p("div"),l.innerHTML='<i class="ri-error-warning-line"></i>',t=E(),n=p("div"),i=p("p"),i.innerHTML="<strong>Error:</strong>",o=E(),r=p("p"),a=N(s[1]),f(l,"class","icon"),f(n,"class","content"),f(e,"class","alert alert-danger m-b-base")},m(u,m){w(u,e,m),c(e,l),c(e,t),c(e,n),c(n,i),c(n,o),c(n,r),c(r,a)},p(u,m){m&2&&R(a,u[1])},d(u){u&&k(e)}}}function Ye(s){let e,l,t,n,i,o,r,a,u,m;return{c(){e=p("div"),l=p("div"),l.innerHTML='<i class="ri-information-line"></i>',t=E(),n=p("div"),i=p("p"),i.textContent="Query executed successfully but returned no results.",o=E(),r=p("p"),a=N("Execution time: "),u=N(s[4]),m=N("ms"),f(l,"class","icon"),f(r,"class","txt-hint"),f(n,"class","content"),f(e,"class","alert alert-info m-b-base")},m(d,_){w(d,e,_),c(e,l),c(e,t),c(e,n),c(n,i),c(n,o),c(n,r),c(r,a),c(r,u),c(r,m)},p(d,_){_&16&&R(u,d[4])},d(d){d&&k(e)}}}function Be(s){let e,l,t,n,i,o,r,a=s[0].length+"",u,m,d,_,y,b,h,q,T,M,v,Q=F(Object.keys(s[0][0]||{})),A=[];for(let C=0;C<Q.length;C+=1)A[C]=Je(Fe(s,Q,C));let K=F(s[0]),O=[];for(let C=0;C<K.length;C+=1)O[C]=Ve(Ke(s,K,C));return{c(){e=p("div"),l=p("div"),t=p("h5"),t.textContent="Results",n=E(),i=p("div"),o=E(),r=p("span"),u=N(a),m=N(" row(s) â€¢ "),d=N(s[4]),_=N("ms"),y=E(),b=p("div"),h=p("table"),q=p("thead"),T=p("tr");for(let C=0;C<A.length;C+=1)A[C].c();M=E(),v=p("tbody");for(let C=0;C<O.length;C+=1)O[C].c();f(i,"class","flex-fill"),f(r,"class","txt-hint"),f(l,"class","flex m-b-sm"),f(h,"class","table svelte-1ooe5et"),dt(h,"table-layout","auto"),f(b,"class","table-wrapper svelte-1ooe5et"),f(e,"class","wrapper svelte-1ooe5et")},m(C,Y){w(C,e,Y),c(e,l),c(l,t),c(l,n),c(l,i),c(l,o),c(l,r),c(r,u),c(r,m),c(r,d),c(r,_),c(e,y),c(e,b),c(b,h),c(h,q),c(q,T);for(let S=0;S<A.length;S+=1)A[S]&&A[S].m(T,null);c(h,M),c(h,v);for(let S=0;S<O.length;S+=1)O[S]&&O[S].m(v,null)},p(C,Y){if(Y&1&&a!==(a=C[0].length+"")&&R(u,a),Y&16&&R(d,C[4]),Y&1){Q=F(Object.keys(C[0][0]||{}));let S;for(S=0;S<Q.length;S+=1){const X=Fe(C,Q,S);A[S]?A[S].p(X,Y):(A[S]=Je(X),A[S].c(),A[S].m(T,null))}for(;S<A.length;S+=1)A[S].d(1);A.length=Q.length}if(Y&1){K=F(C[0]);let S;for(S=0;S<K.length;S+=1){const X=Ke(C,K,S);O[S]?O[S].p(X,Y):(O[S]=Ve(X),O[S].c(),O[S].m(v,null))}for(;S<O.length;S+=1)O[S].d(1);O.length=K.length}},d(C){C&&k(e),le(A,C),le(O,C)}}}function Je(s){let e,l=s[8]+"",t;return{c(){e=p("th"),t=N(l)},m(n,i){w(n,e,i),c(e,t)},p(n,i){i&1&&l!==(l=n[8]+"")&&R(t,l)},d(n){n&&k(e)}}}function je(s){let e,l=Ue(s[5][s[8]])+"",t,n;return{c(){e=p("td"),t=N(l),f(e,"title",n=String(s[5][s[8]])),f(e,"class","svelte-1ooe5et"),I(e,"txt-hint",Xe(s[5][s[8]]))},m(i,o){w(i,e,o),c(e,t)},p(i,o){o&1&&l!==(l=Ue(i[5][i[8]])+"")&&R(t,l),o&1&&n!==(n=String(i[5][i[8]]))&&f(e,"title",n),o&1&&I(e,"txt-hint",Xe(i[5][i[8]]))},d(i){i&&k(e)}}}function Ve(s){let e,l,t=F(Object.keys(s[0][0]||{})),n=[];for(let i=0;i<t.length;i+=1)n[i]=je(De(s,t,i));return{c(){e=p("tr");for(let i=0;i<n.length;i+=1)n[i].c();l=E()},m(i,o){w(i,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);c(e,l)},p(i,o){if(o&1){t=F(Object.keys(i[0][0]||{}));let r;for(r=0;r<t.length;r+=1){const a=De(i,t,r);n[r]?n[r].p(a,o):(n[r]=je(a),n[r].c(),n[r].m(e,l))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&k(e),le(n,i)}}}function Ge(s){let e,l,t,n,i,o,r,a,u,m,d,_,y;return{c(){e=p("div"),l=p("div"),l.innerHTML='<i class="ri-checkbox-circle-line"></i>',t=E(),n=p("div"),i=p("p"),o=N("Query executed successfully. "),r=N(s[3]),a=N(" row(s) affected."),u=E(),m=p("p"),d=N("Execution time: "),_=N(s[4]),y=N("ms"),f(l,"class","icon"),f(m,"class","txt-hint"),f(n,"class","content"),f(e,"class","alert alert-success m-b-base")},m(b,h){w(b,e,h),c(e,l),c(e,t),c(e,n),c(n,i),c(i,o),c(i,r),c(i,a),c(n,u),c(n,m),c(m,d),c(m,_),c(m,y)},p(b,h){h&8&&R(r,b[3]),h&16&&R(_,b[4])},d(b){b&&k(e)}}}function Yt(s){let e,l,t,n,i=s[1]&&Pe(s),o=s[0]!==null&&s[0].length===0&&!s[2]&&Ye(s),r=s[0]!==null&&s[0].length>0&&Be(s),a=s[2]&&!s[1]&&Ge(s);return{c(){i&&i.c(),e=E(),o&&o.c(),l=E(),r&&r.c(),t=E(),a&&a.c(),n=ae()},m(u,m){i&&i.m(u,m),w(u,e,m),o&&o.m(u,m),w(u,l,m),r&&r.m(u,m),w(u,t,m),a&&a.m(u,m),w(u,n,m)},p(u,[m]){u[1]?i?i.p(u,m):(i=Pe(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u[0]!==null&&u[0].length===0&&!u[2]?o?o.p(u,m):(o=Ye(u),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),u[0]!==null&&u[0].length>0?r?r.p(u,m):(r=Be(u),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),u[2]&&!u[1]?a?a.p(u,m):(a=Ge(u),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:U,o:U,d(u){u&&(k(e),k(l),k(t),k(n)),i&&i.d(u),o&&o.d(u),r&&r.d(u),a&&a.d(u)}}}function Ue(s){return s==null?"NULL":typeof s=="string"&&s.length>100?s.substring(0,100)+"...":String(s)}function Xe(s){return s==null}function Bt(s,e,l){let{results:t=null}=e,{error:n=null}=e,{isWrite:i=!1}=e,{rowsAffected:o=0}=e,{executionMs:r=0}=e;return s.$$set=a=>{"results"in a&&l(0,t=a.results),"error"in a&&l(1,n=a.error),"isWrite"in a&&l(2,i=a.isWrite),"rowsAffected"in a&&l(3,o=a.rowsAffected),"executionMs"in a&&l(4,r=a.executionMs)},[t,n,i,o,r]}class Jt extends _e{constructor(e){super(),de(this,e,Bt,Yt,me,{results:0,error:1,isWrite:2,rowsAffected:3,executionMs:4})}}function jt(s){let e;return{c(){e=p("div"),e.innerHTML=`<div class="alert alert-warning m-b-base"><div class="icon"><i class="ri-alert-line"></i></div> <div class="content"><p><strong>Warning:</strong> Enabling write queries allows you to execute
                    <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, and other
                    database modification statements.</p> <p class="m-t-10">This can permanently modify or delete data in your database. Please
                    proceed with caution.</p></div></div> <p class="txt-hint">Write mode will automatically be disabled after each query execution for safety.</p>`,f(e,"class","content")},m(l,t){w(l,e,t)},p:U,d(l){l&&k(e)}}}function Vt(s){let e;return{c(){e=p("h4"),e.textContent="Enable Write Queries"},m(l,t){w(l,e,t)},p:U,d(l){l&&k(e)}}}function Gt(s){let e,l,t,n,i;return{c(){e=p("button"),e.innerHTML='<span class="txt">Cancel</span>',l=E(),t=p("button"),t.innerHTML='<i class="ri-lock-unlock-line"></i> <span class="txt">Enable Writes</span>',f(e,"type","button"),f(e,"class","btn btn-transparent"),f(t,"type","button"),f(t,"class","btn btn-expanded btn-warning")},m(o,r){w(o,e,r),w(o,l,r),w(o,t,r),n||(i=[G(e,"click",s[2]),G(t,"click",s[1])],n=!0)},p:U,d(o){o&&(k(e),k(l),k(t)),n=!1,ce(i)}}}function Ut(s){let e,l,t;function n(o){s[3](o)}let i={popup:!0,class:"overlay-panel-sm",$$slots:{footer:[Gt],header:[Vt],default:[jt]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.active=s[0]),e=new mt({props:i}),at.push(()=>ct(e,"active",n)),e.$on("hide",s[2]),{c(){V(e.$$.fragment)},m(o,r){j(e,o,r),t=!0},p(o,[r]){const a={};r&32&&(a.$$scope={dirty:r,ctx:o}),!l&&r&1&&(l=!0,a.active=o[0],ft(()=>l=!1)),e.$set(a)},i(o){t||(H(e.$$.fragment,o),t=!0)},o(o){W(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function Xt(s,e,l){const t=ge();let{active:n=!1}=e;function i(){t("confirm"),l(0,n=!1)}function o(){t("cancel"),l(0,n=!1)}function r(a){n=a,l(0,n)}return s.$$set=a=>{"active"in a&&l(0,n=a.active)},[n,i,o,r]}class Zt extends _e{constructor(e){super(),de(this,e,Xt,Ut,me,{active:0})}}function Ze(s,e,l){const t=s.slice();return t[39]=e[l],t[41]=l,t}function ze(s){let e;return{c(){e=p("i"),f(e,"class","ri-loader-4-line rotating txt-hint svelte-1q3qvy1")},m(l,t){w(l,e,t)},d(l){l&&k(e)}}}function xe(s){let e,l,t;function n(){return s[25](s[41])}return{c(){e=p("button"),e.innerHTML='<i class="ri-close-line svelte-1q3qvy1"></i>',f(e,"type","button"),f(e,"class","tab-close svelte-1q3qvy1"),f(e,"aria-label","Close tab")},m(i,o){w(i,e,o),l||(t=G(e,"click",ve(n)),l=!0)},p(i,o){s=i},d(i){i&&k(e),l=!1,t()}}}function et(s){let e,l,t=s[39].name+"",n,i,o,r,a,u,m=s[39].isExecuting&&ze(),d=s[0].length>1&&xe(s);function _(){return s[26](s[41])}return{c(){e=p("button"),l=p("span"),n=N(t),i=E(),m&&m.c(),o=E(),d&&d.c(),f(l,"class","tab-name svelte-1q3qvy1"),f(e,"type","button"),f(e,"class","tab svelte-1q3qvy1"),f(e,"aria-label",r=`Tab: ${s[39].name}`),I(e,"active",s[1]===s[41])},m(y,b){w(y,e,b),c(e,l),c(l,n),c(e,i),m&&m.m(e,null),c(e,o),d&&d.m(e,null),a||(u=G(e,"click",_),a=!0)},p(y,b){s=y,b[0]&1&&t!==(t=s[39].name+"")&&R(n,t),s[39].isExecuting?m||(m=ze(),m.c(),m.m(e,o)):m&&(m.d(1),m=null),s[0].length>1?d?d.p(s,b):(d=xe(s),d.c(),d.m(e,null)):d&&(d.d(1),d=null),b[0]&1&&r!==(r=`Tab: ${s[39].name}`)&&f(e,"aria-label",r),b[0]&2&&I(e,"active",s[1]===s[41])},d(y){y&&k(e),m&&m.d(),d&&d.d(),a=!1,u()}}}function tt(s){let e,l,t,n,i,o,r=s[9].isExecuting?"Executing...":"Execute Query",a,u,m,d,_,y,b,h,q;l=new kt({props:{class:"form-field m-b-base",name:"sql",$$slots:{default:[zt,({uniqueId:v})=>({38:v}),({uniqueId:v})=>[0,v?128:0]]},$$scope:{ctx:s}}});let T=!s[9].isExecuting&&lt(),M=(s[9].results!==null||s[9].error!==null)&&nt(s);return y=new Jt({props:{results:s[9].results,error:s[9].error,isWrite:s[9].isWrite,rowsAffected:s[9].rowsAffected,executionMs:s[9].executionMs}}),{c(){e=p("div"),V(l.$$.fragment),t=E(),n=p("div"),i=p("button"),o=p("span"),a=N(r),u=E(),T&&T.c(),d=E(),M&&M.c(),_=E(),V(y.$$.fragment),f(o,"class","txt"),f(i,"type","button"),f(i,"class","btn btn-expanded"),i.disabled=m=!s[9].query.trim()||s[9].isExecuting,f(n,"class","flex gap-10 m-b-base"),f(e,"class","wrapper svelte-1q3qvy1")},m(v,Q){w(v,e,Q),j(l,e,null),c(e,t),c(e,n),c(n,i),c(i,o),c(o,a),c(i,u),T&&T.m(i,null),c(n,d),M&&M.m(n,null),c(e,_),j(y,e,null),b=!0,h||(q=G(i,"click",s[19]),h=!0)},p(v,Q){const A={};Q[0]&516|Q[1]&2176&&(A.$$scope={dirty:Q,ctx:v}),l.$set(A),(!b||Q[0]&512)&&r!==(r=v[9].isExecuting?"Executing...":"Execute Query")&&R(a,r),v[9].isExecuting?T&&(T.d(1),T=null):T||(T=lt(),T.c(),T.m(i,null)),(!b||Q[0]&512&&m!==(m=!v[9].query.trim()||v[9].isExecuting))&&(i.disabled=m),v[9].results!==null||v[9].error!==null?M?M.p(v,Q):(M=nt(v),M.c(),M.m(n,null)):M&&(M.d(1),M=null);const K={};Q[0]&512&&(K.results=v[9].results),Q[0]&512&&(K.error=v[9].error),Q[0]&512&&(K.isWrite=v[9].isWrite),Q[0]&512&&(K.rowsAffected=v[9].rowsAffected),Q[0]&512&&(K.executionMs=v[9].executionMs),y.$set(K)},i(v){b||(H(l.$$.fragment,v),H(y.$$.fragment,v),b=!0)},o(v){W(l.$$.fragment,v),W(y.$$.fragment,v),b=!1},d(v){v&&k(e),J(l),T&&T.d(),M&&M.d(),J(y),h=!1,q()}}}function zt(s){let e,l,t,n,i,o,r,a,u,m,d;var _=s[2];function y(b,h){return{props:{id:b[38],value:b[9].query,language:"sql-select",placeholder:"Enter your SQL query here...",minHeight:150,maxHeight:400}}}return _&&(r=qe(_,y(s)),r.$on("change",s[27])),{c(){e=p("label"),l=p("span"),l.textContent="SQL Query",t=E(),n=p("i"),o=E(),r&&V(r.$$.fragment),a=ae(),f(l,"class","txt"),f(n,"class","ri-information-line link-hint"),f(n,"aria-label","Press Ctrl+Enter (Cmd+Enter on Mac) to execute the query"),f(e,"for",i=s[38])},m(b,h){w(b,e,h),c(e,l),c(e,t),c(e,n),w(b,o,h),r&&j(r,b,h),w(b,a,h),u=!0,m||(d=re(oe.call(null,n,{position:"right"})),m=!0)},p(b,h){if((!u||h[1]&128&&i!==(i=b[38]))&&f(e,"for",i),h[0]&4&&_!==(_=b[2])){if(r){ee();const q=r;W(q.$$.fragment,1,0,()=>{J(q,1)}),te()}_?(r=qe(_,y(b)),r.$on("change",b[27]),V(r.$$.fragment),H(r.$$.fragment,1),j(r,a.parentNode,a)):r=null}else if(_){const q={};h[1]&128&&(q.id=b[38]),h[0]&512&&(q.value=b[9].query),r.$set(q)}},i(b){u||(r&&H(r.$$.fragment,b),u=!0)},o(b){r&&W(r.$$.fragment,b),u=!1},d(b){b&&(k(e),k(o),k(a)),r&&J(r,b),m=!1,d()}}}function lt(s){let e;return{c(){e=p("span"),e.textContent="(Ctrl+Enter)",f(e,"class","txt txt-hint")},m(l,t){w(l,e,t)},d(l){l&&k(e)}}}function nt(s){let e,l,t;return{c(){e=p("button"),e.innerHTML='<i class="ri-close-line"></i> <span class="txt">Clear</span>',f(e,"type","button"),f(e,"class","btn btn-secondary btn-outline")},m(n,i){w(n,e,i),l||(t=G(e,"click",s[21]),l=!0)},p:U,d(n){n&&k(e),l=!1,t()}}}function xt(s){let e,l,t,n,i,o,r,a=s[4]?"READ-ONLY":"WRITE ENABLED",u,m,d,_,y,b,h=s[4]?"Enable writes":"Disable writes",q,T,M,v,Q,A,K=s[8]?"Hide history":"Show history",O,C,Y,S,X,x,ie,Z,fe,ne,B,ue,pe;n=new yt({}),n.$on("refresh",s[15]);let se=F(s[0]),P=[];for(let L=0;L<se.length;L+=1)P[L]=et(Ze(s,se,L));let D=s[9]&&tt(s);return{c(){e=p("header"),l=p("nav"),l.innerHTML='<div class="breadcrumb-item">SQL Console</div>',t=E(),V(n.$$.fragment),i=E(),o=p("div"),r=p("span"),u=N(a),m=E(),d=p("button"),_=p("i"),y=E(),b=p("span"),q=N(h),T=E(),M=p("button"),v=p("i"),Q=E(),A=p("span"),O=N(K),S=E(),X=p("div"),x=p("div");for(let L=0;L<P.length;L+=1)P[L].c();ie=E(),Z=p("button"),Z.innerHTML='<i class="ri-add-line svelte-1q3qvy1"></i>',fe=E(),D&&D.c(),ne=ae(),f(l,"class","breadcrumbs"),f(r,"class","label"),I(r,"label-success",!s[4]),I(r,"label-primary",s[4]),f(_,"class","ri-lock-line"),f(_,"aria-hidden","true"),f(b,"class","txt"),f(d,"type","button"),f(d,"class","btn btn-outline"),I(d,"btn-warning",s[4]),f(v,"class","ri-history-line"),f(A,"class","txt"),f(M,"type","button"),f(M,"class","btn btn-outline"),f(M,"aria-label",C=s[8]?"Hide history":"Show history"),I(M,"btn-hint",!s[8]),f(o,"class","btns-group"),f(e,"class","page-header"),f(Z,"type","button"),f(Z,"class","tab-new svelte-1q3qvy1"),f(Z,"aria-label","New tab"),f(x,"class","tabs-list svelte-1q3qvy1"),f(X,"class","tabs-bar svelte-1q3qvy1")},m(L,g){w(L,e,g),c(e,l),c(e,t),j(n,e,null),c(e,i),c(e,o),c(o,r),c(r,u),c(o,m),c(o,d),c(d,_),c(d,y),c(d,b),c(b,q),c(o,T),c(o,M),c(M,v),c(M,Q),c(M,A),c(A,O),w(L,S,g),w(L,X,g),c(X,x);for(let $=0;$<P.length;$+=1)P[$]&&P[$].m(x,null);c(x,ie),c(x,Z),w(L,fe,g),D&&D.m(L,g),w(L,ne,g),B=!0,ue||(pe=[G(d,"click",s[17]),re(Y=oe.call(null,M,{text:s[8]?"Hide history":"Show history",position:"left"})),G(M,"click",s[13]),G(Z,"click",s[10]),re(oe.call(null,Z,{text:"New tab (Ctrl+T)",position:"bottom"}))],ue=!0)},p(L,g){if((!B||g[0]&16)&&a!==(a=L[4]?"READ-ONLY":"WRITE ENABLED")&&R(u,a),(!B||g[0]&16)&&I(r,"label-success",!L[4]),(!B||g[0]&16)&&I(r,"label-primary",L[4]),(!B||g[0]&16)&&h!==(h=L[4]?"Enable writes":"Disable writes")&&R(q,h),(!B||g[0]&16)&&I(d,"btn-warning",L[4]),(!B||g[0]&256)&&K!==(K=L[8]?"Hide history":"Show history")&&R(O,K),(!B||g[0]&256&&C!==(C=L[8]?"Hide history":"Show history"))&&f(M,"aria-label",C),Y&&wt(Y.update)&&g[0]&256&&Y.update.call(null,{text:L[8]?"Hide history":"Show history",position:"left"}),(!B||g[0]&256)&&I(M,"btn-hint",!L[8]),g[0]&6147){se=F(L[0]);let $;for($=0;$<se.length;$+=1){const z=Ze(L,se,$);P[$]?P[$].p(z,g):(P[$]=et(z),P[$].c(),P[$].m(x,ie))}for(;$<P.length;$+=1)P[$].d(1);P.length=se.length}L[9]?D?(D.p(L,g),g[0]&512&&H(D,1)):(D=tt(L),D.c(),H(D,1),D.m(ne.parentNode,ne)):D&&(ee(),W(D,1,1,()=>{D=null}),te())},i(L){B||(H(n.$$.fragment,L),H(D),B=!0)},o(L){W(n.$$.fragment,L),W(D),B=!1},d(L){L&&(k(e),k(S),k(X),k(fe),k(ne)),J(n),le(P,L),D&&D.d(L),ue=!1,ce(pe)}}}function st(s){let e,l;return e=new Pt({props:{visible:s[8],history:s[3]}}),e.$on("select",s[28]),e.$on("clear",s[14]),{c(){V(e.$$.fragment)},m(t,n){j(e,t,n),l=!0},p(t,n){const i={};n[0]&256&&(i.visible=t[8]),n[0]&8&&(i.history=t[3]),e.$set(i)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function el(s){let e,l,t,n,i,o,r,a,u,m,d;e=new It({props:{tables:s[6],isLoading:s[7]}}),e.$on("refresh",s[15]),e.$on("quickQuery",s[24]),n=new pt({props:{class:"flex-content",$$slots:{default:[xt]},$$scope:{ctx:s}}});let _=s[8]&&st(s);function y(h){s[29](h)}let b={};return s[5]!==void 0&&(b.active=s[5]),r=new Zt({props:b}),at.push(()=>ct(r,"active",y)),r.$on("confirm",s[18]),r.$on("cancel",ll),{c(){V(e.$$.fragment),l=E(),t=p("div"),V(n.$$.fragment),i=E(),_&&_.c(),o=E(),V(r.$$.fragment),f(t,"class","sql-main-content svelte-1q3qvy1")},m(h,q){j(e,h,q),w(h,l,q),w(h,t,q),j(n,t,null),c(t,i),_&&_.m(t,null),w(h,o,q),j(r,h,q),u=!0,m||(d=G(window,"keydown",s[16]),m=!0)},p(h,q){const T={};q[0]&64&&(T.tables=h[6]),q[0]&128&&(T.isLoading=h[7]),e.$set(T);const M={};q[0]&791|q[1]&2048&&(M.$$scope={dirty:q,ctx:h}),n.$set(M),h[8]?_?(_.p(h,q),q[0]&256&&H(_,1)):(_=st(h),_.c(),H(_,1),_.m(t,null)):_&&(ee(),W(_,1,1,()=>{_=null}),te());const v={};!a&&q[0]&32&&(a=!0,v.active=h[5],ft(()=>a=!1)),r.$set(v)},i(h){u||(H(e.$$.fragment,h),H(n.$$.fragment,h),H(_),H(r.$$.fragment,h),u=!0)},o(h){W(e.$$.fragment,h),W(n.$$.fragment,h),W(_),W(r.$$.fragment,h),u=!1},d(h){h&&(k(l),k(t),k(o)),J(e,h),J(n),_&&_.d(),J(r,h),m=!1,d()}}}const he="pb_sql_console_history",it="pb_sql_console_history_visible",rt="pb_sql_console_tabs",tl=50;function ll(){}function nl(s,e,l){let t,n;bt(s,Ee,g=>l(31,n=g)),ht(Ee,n="SQL Console",n);let i,o=[],r=!0,a=!1,u=[],m=!1,d=!0,_=[],y=0,b=1;gt(async()=>{try{l(2,i=(await qt(async()=>{const{default:g}=await import("./CodeEditor-BOs4ZIdI.js");return{default:g}},__vite__mapDeps([0,1,2,3]),import.meta.url)).default)}catch(g){console.warn("Failed to load CodeEditor component:",g)}K(),Q(),M(),Y()});function h(){const g={id:b++,name:`Query ${_.length+1}`,query:"",results:null,error:null,isExecuting:!1,executionMs:0,rowsAffected:0,isWrite:!1};l(0,_=[..._,g]),l(1,y=_.length-1),v()}function q(g){_.length===1?l(0,_[0]={..._[0],query:"",results:null,error:null,executionMs:0,rowsAffected:0,isWrite:!1},_):(l(0,_=_.filter(($,z)=>z!==g)),y>=_.length?l(1,y=_.length-1):y>g&&l(1,y--,y)),v()}function T(g){l(1,y=g),v()}function M(){try{const g=localStorage.getItem(rt);if(g){const $=JSON.parse(g);l(0,_=$.tabs||[]),l(1,y=$.activeTabIndex||0),b=$.nextTabId||1,l(0,_=_.map(z=>({id:z.id||b++,name:z.name||"Query",query:z.query||"",results:null,error:null,isExecuting:!1,executionMs:0,rowsAffected:0,isWrite:!1})))}_.length===0&&h()}catch(g){console.warn("Failed to load tabs:",g),h()}}function v(){try{const g={tabs:_.map($=>({id:$.id,name:$.name,query:$.query})),activeTabIndex:y,nextTabId:b};localStorage.setItem(rt,JSON.stringify(g))}catch(g){console.warn("Failed to save tabs:",g)}}function Q(){try{const g=localStorage.getItem(it);g!==null&&l(8,d=JSON.parse(g))}catch(g){console.warn("Failed to load history visibility:",g)}}function A(){l(8,d=!d);try{localStorage.setItem(it,JSON.stringify(d))}catch(g){console.warn("Failed to save history visibility:",g)}}function K(){try{const g=localStorage.getItem(he);g&&l(3,o=JSON.parse(g))}catch(g){console.warn("Failed to load query history:",g)}}function O(){try{localStorage.setItem(he,JSON.stringify(o))}catch(g){console.warn("Failed to save query history:",g)}}function C(){l(3,o=[]),localStorage.removeItem(he)}async function Y(){l(7,m=!0);try{l(6,u=await be.send("/api/sql/schema",{method:"GET"}))}catch(g){console.warn("Failed to load schema:",g),be.error(g,!1)}l(7,m=!1)}function S(g){(g.ctrlKey||g.metaKey)&&g.key==="Enter"&&(g.preventDefault(),ie()),(g.ctrlKey||g.metaKey)&&g.key==="t"&&(g.preventDefault(),h())}function X(){r?l(5,a=!0):l(4,r=!0)}function x(){l(4,r=!1)}async function ie(){var g;if(!(!t||!t.query.trim()||t.isExecuting)){l(9,t.results=null,t),l(9,t.error=null,t),l(9,t.executionMs=0,t),l(9,t.rowsAffected=0,t),l(9,t.isWrite=!1,t),l(9,t.isExecuting=!0,t),l(0,_);try{const $=await be.send("/api/sql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:t.query,allowWrite:!r})}),z=t.query.trim();l(3,o=[z,...o.filter(ut=>ut!==z)].slice(0,tl)),O(),l(9,t.results=$.results||[],t),l(9,t.rowsAffected=$.rowsAffected||0,t),l(9,t.isWrite=$.isWrite||!1,t),l(9,t.executionMs=$.executionMs||0,t),t.isWrite&&(vt(`Query executed successfully. ${t.rowsAffected} row(s) affected.`),l(4,r=!0))}catch($){(g=$==null?void 0:$.data)!=null&&g.message?l(9,t.error=$.data.message,t):$!=null&&$.message?l(9,t.error=$.message,t):l(9,t.error="An unexpected error occurred.",t)}l(9,t.isExecuting=!1,t),l(0,_),v()}}function Z(g){t&&(l(9,t.query=g,t),l(0,_),v())}function fe(){t&&(l(9,t.results=null,t),l(9,t.error=null,t),l(9,t.executionMs=0,t),l(9,t.rowsAffected=0,t),l(9,t.isWrite=!1,t),l(0,_))}function ne(g){t&&(l(9,t.query=`SELECT * FROM ${g} LIMIT 100`,t),l(0,_),v(),ie())}function B(g){t&&(l(9,t.query=g,t),l(0,_),v())}const ue=g=>ne(g.detail.tableName),pe=g=>q(g),se=g=>T(g),P=g=>B(g.detail),D=g=>Z(g.detail.query);function L(g){a=g,l(5,a)}return s.$$.update=()=>{s.$$.dirty[0]&3&&l(9,t=_[y])},[_,y,i,o,r,a,u,m,d,t,h,q,T,A,C,Y,S,X,x,ie,Z,fe,ne,B,ue,pe,se,P,D,L]}class il extends _e{constructor(e){super(),de(this,e,nl,el,me,{},null,[-1,-1])}}export{il as default};
